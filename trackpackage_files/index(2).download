!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";try{n(1),n(3)}catch(e){window.console&&console.log&&console.log(e)}},function(e,t,n){"use strict";var o=n(2);o()},function(e,t,n){var o,o;e.exports=function(){!function e(t,n,r){function i(c,s){if(!n[c]){if(!t[c]){var d="function"==typeof o&&o;if(!s&&d)return o(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+c+"'")}var u=n[c]={exports:{}};t[c][0].call(u.exports,function(e){var n=t[c][1][e];return i(n?n:e)},u,u.exports,e,t,n,r)}return n[c].exports}for(var a="function"==typeof o&&o,c=0;c<r.length;c++)i(r[c]);return i}({1:[function(e,t,n){t.exports=function(e,t){for(var n,o=[],r=["custom","error","performance","retCode","speed","log"],i=0,a=function(e){return function(){o.push({type:e,params:Array.prototype.slice.call(arguments)})}};n=r[i++];)e[n]=a(n);e.reloaded=function(){e.ready();for(var t=0,n=o.length;n>t;t++)e[o[t].type].apply(e,o[t].params)},e.reloadFailed=function(){"function"==typeof t&&t()}}},{}],2:[function(e,t,n){t.exports=function(e,t){var n,o;if(e.startTime)n=e.startTime;else try{n=window.performance.timing.responseStart,o=new Date}catch(e){o=n=new Date-0}var r=function(t,n){n=n||e.config.sample,e.sampling(n)==(e.config.modVal||1)&&(t.sampling=n,e.send(t))};e.custom=function(e,n,o){var i={type:"custom"},a=["time","count"];e=a[e]||e,("time"==e||"count"==e)&&(i.category=e),i.type&&(i.key=n,i.value="time"==e?o:t,r(i))},e.error=function(e,t,n,o,i,a){var c={type:"jserror"};1===arguments.length&&(t=e,e=void 0),t&&(c.category=e||"sys",c.msg=t,n&&(c.file=n),o&&(c.line=o),i&&(c.col=i),a&&(c.stack=a),r(c,1))},e.performance=function(t){var n={type:"per"};r(e.extend(n,t))},e.retCode=function(e,t,o,i,a){var c={type:"retcode",api:e,issucess:t,delay:"number"==typeof o?parseInt(o,10):new Date-n,msg:i||(t?"success":"fail"),detail:a||"",sampling:this.config.retCode[e]};"undefined"!=typeof c.delay&&r(c,t?c.sampling:1)};var i=function(){for(var t,n={type:"speed"},o=0,i=e.speed.points.length;i>o;o++)t=e.speed.points[o],t&&(n["s"+o]=t,e.speed.points[o]=null);r(n)};e.speed=function(t,r,a){var c;"string"==typeof t&&(t=parseInt(t.slice(1),10)),"number"==typeof t&&(c=e.speed.points||new Array(11),c[t]="number"==typeof r?r:new Date-n,c[t]<0&&(c[t]=new Date-o),e.speed.points=c),clearTimeout(e.speed.timer),a?i():e.speed.timer=setTimeout(i,3e3)},e.log=function(e,t){var n={type:"log",msg:e};r(n,t)}}},{}],3:[function(e,t,n){t.exports=function(e,t,n,o){var r={spm:e.getSpmId()},i=t.onerror,a={init:function(){this.lockPerformanceSpm(),this.sendPerformance(),this.bind(),/wpodebug\=1/.test(location.search)&&(e.config.sample=1,e.config.modVal=1,e.debug=!0)},bind:function(){e.on(t,"beforeunload",function(){e.clear(),e.speed.points&&e.speed(null,null,!0)},!0),t.onerror=function(t,n,o,r,a){i&&i(t,n,o,r,a);var c=a&&a.stack;n?e.error("sys",t,n,o,r,c):e.error(t)}},analyzeTiming:function(){var e={rrt:["responseStart","requestStart"],dns:["domainLookupEnd","domainLookupStart"],cnt:["connectEnd","connectStart"],ntw:["responseStart","fetchStart"],dct:["domContentLoadedEventStart","responseStart"],flt:["loadEventStart","responseStart"]};try{var t=performance.timing;for(var n in e){var o=t[e[n][1]],i=t[e[n][0]];if(o&&i){var a=i-o;a>=0&&864e5>a&&(r[n]=a)}}}catch(e){}return r},lockPerformanceSpm:function(){if(!r.spm){var e=function(){var e=o&&o.getSpmId&&o.getSpmId();e&&(r.spm=e)},t=function(){"complete"===document.readyState?e():document.addEventListener?(document.removeEventListener("DOMContentLoaded",t,!1),e()):"complete"===document.readyState&&(document.detachEvent("onreadystatechange",t),e())};document.addEventListener?document.addEventListener("DOMContentLoaded",t,!1):document.attachEvent&&document.attachEvent("onreadystatechange",t)}},sendPerformance:function(){var o=this;n?e.performance(o.analyzeTiming()):e.on(t,"load",function(){e.performance(o.analyzeTiming())},!0)}};a.init()}},{}],4:[function(e,t,n){var o=function(){return+new Date+Math.floor(1e3*Math.random())},r="",i=function(){var e=document.getElementsByTagName("meta"),t=[];if(r)return r;for(var n=0;n<e.length;n++){var o=e[n];o&&o.name&&("data-spm"==o.name||"spm-id"==o.name)&&t.push(o.content)}return document.body&&document.body.getAttribute("data-spm")&&t.push(document.body.getAttribute("data-spm")),t=t.length?t.join("."):0,t&&-1!==t.indexOf(".")&&(r=t),r};i.bind||(i.bind=function(){return i}),t.exports={sendRequest:function(e){var t=window,n="jsFeImage_"+o(),r=t[n]=new Image;r.onload=r.onerror=function(){t[n]=null},r.src=e,r=null},getCookie:function(){return document.cookie},getSpmId:i}},{}],5:[function(e,t,n){t.exports=function(e,t,n){var o,r,i={},a=0,c={imgUrl:"//retcode.taobao.com/r.png?",sample:10,modVal:1,dynamic:!1,retCode:{}},s=n.sendRequest,d=function(){for(var t,n;(t=f.dequeue())&&(n=f.extend({uid:o,userNick:e.getNick(),times:t.times?t.times:1,_t:~new Date+(a++).toString()},t),n.spm||(n.spm=e.getSpmId()),n.spm);)e.debug&&"object"==typeof window&&window.console&&console.log(n),s.call(e,c.imgUrl+f.query.stringify(n));r=null},u=function(e){e&&r&&(clearTimeout(r),d()),r||(r=setTimeout(d,1e3))},f={_key:"wpokey",ver:"0.2.10",requestQueue:e.requestQueue||[],getCookie:function(e){var t,o,r="";if(!i[e]){t=new RegExp(e+"=([^;]+)");try{r=n.getCookie(this)}catch(e){}o=t.exec(r),o&&(i[e]=o[1])}return i[e]},setCookie:function(e,t,n,o,r){var i=e+"="+t;o&&(i+="; domain="+o),r&&(i+="; path="+r),n&&(i+="; expires="+n),document.cookie=i},extend:function(e){for(var t,n=Array.prototype.slice.call(arguments,1),o=0,r=n.length;r>o;o++){t=n[o];for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}return e},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})},send:function(t){if(t&&!e.config.disabled){var n=f.getSpmId();!t.spm&&n&&(t.spm=n),this.queue(t)}},query:{stringify:function(e){var t=[],n="";try{for(var o in e)e.hasOwnProperty(o)&&void 0!==e[o]&&t.push(o+"="+encodeURIComponent(e[o]));t.length>0&&(n=t.join("&"))}catch(e){}return n},parse:function(e){var t,n=e.split("&"),o={};try{for(var r=0,i=n.length;i>r;r++)t=n[r].split("="),o[t[0]]=decodeURIComponent(t[1])}catch(e){}return o}},getSpmId:function(){return c.spmId?c.spmId:"function"==typeof n.getSpmId?n.getSpmId.call(this):0},on:function(e,t,n,o){e.addEventListener?e.addEventListener(t,o?function(){e.removeEventListener(t,n,!1),n()}:n,!1):e.attachEvent&&e.attachEvent("on"+t,function(){o&&e.detachEvent("on"+t,arguments.callee),n()})},getNick:function(){var t="";try{e.config.nick?t=e.config.nick:(t=this.getCookie("_nk_")||this.getCookie("lgc")||this.getCookie("_w_tb_nick")||this.getCookie("sn")||"",t=decodeURIComponent(t))}catch(e){}return t},setConfig:function(e){if(e&&"object"!=typeof e)throw"args of wpo.setConfig is not object";return e&&e.user&&"function"==typeof e.user.getUserInfo&&"weex"===this.env&&e.user.getUserInfo(function(e){try{var t=JSON.parse(e);f.extend(c,{nick:t.info&&t.info.nick})}catch(e){}}),f.extend(c,e)},spm:function(e){return e&&this.setConfig({spmId:e}),this},dynamicConfig:function(e){var t=this.query.stringify(e);try{localStorage.setItem(this._key,t)}catch(n){this.setCookie(this._key,t,new Date(e.expTime))}this.setConfig({sample:parseInt(e.sample,10)}),this.ready()},ready:function(e){this._ready=!0;var t=!0;this._immediately=e||t,u()},queue:function(e){var t,n=this.requestQueue;if("jserror"===e.type){if(n.length&&(t=n[n.length-1],e.msg===t.msg))return void t.times++;e.times||(e.times=1)}n.push(e),this._ready&&(this._immediately&&"jserror"!==e.type?d():u())},dequeue:function(){return this.requestQueue.shift()},clear:function(){u(!0)}};return f.uid=o=f.guid(),f.config=f.setConfig(e.config),f.extend(e,f),t.__WPO=e,e}},{}],6:[function(e,t,n){!function(t){var n=e("./conf-browser"),o=t.__WPO||{},r=2,i=!1;o.env="browser",e("./core")(o,t,n);var a=function(){e("./sampling")(o),e("./apis")(o),e("./browser-performance")(o,t,i,n)};return o.config.dynamic&&!(r=e("./server-config")(o))?void e("./api-await")(o,function(){a(),o.reloaded&&o.reloaded()}):(2==r?o.on(t,"load",function(){o.ready()},!0):o.on(t,"load",function(){i=!0}),void a())}(window),t.exports=window.__WPO},{"./api-await":1,"./apis":2,"./browser-performance":3,"./conf-browser":4,"./core":5,"./sampling":7,"./server-config":8}],7:[function(e,t,n){t.exports=function(e){var t={};e.sampling=function(n){return e.uid,1==n?1:"number"==typeof t[n]?t[n]:(t[n]=Math.floor(Math.random()*n),t[n])}}},{}],8:[function(e,t,n){t.exports=function(e){var t,n,o,r,i,a=e._key,c=function(e){var t=document.createElement("script");return t.src=e,document.getElementsByTagName("script")[0].parentNode.appendChild(t),t},s=function(){i||(i=!0,d())},d=function(){var t="//retcode.alicdn.com/retcode/pro/config/"+e.getSpmId()+".js",n=c(t);n.onerror=function(){n.onerror=null,e.error("sys","dynamic config error",t,0),e.ready()}},u=function(){"complete"===document.readyState?s():document.addEventListener?document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),s()},!1):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),s())}),document.documentElement.doScroll&&"undefined"==typeof window.frameElement&&function(){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}s()}(),e.on(window,"load",function(){s()},!0))};if(!a)return 2;try{t=localStorage.getItem(a)}catch(n){t=e.getCookie(a)}return t?(n=e.query.parse(t),selfUpdate=function(){var t=e.ver&&e.ver.split("."),o=n.ver&&n.ver.split(".");if(!t||!o)return!1;for(var r=0,i=t.length;i>r;r++)if(o[r]&&parseInt(t[r],10)<parseInt(o[r],10))return!0;return!1},selfUpdate()?(r="//g.alicdn.com/retcode/log/"+n.ver+"/log.js",o=c(r),o.onload=function(){o.onload=null,e.reloaded()},o.onerror=function(){o.onerror=null,e.error("sys","self update error",r,0),e.reloadFailed()},0):parseInt(n.exp,10)<(new Date).getTime()?(u(),1):(e.setConfig({sample:parseInt(n.sample,10)}),2)):(u(),1)}},{}]},{},[6]),window.__WPO&&window.__WPO.setConfig({sample:1,spmId:"",retCode:{}}),function(){function e(){if(arguments[0]){var e="";if(arguments[0].error){var t=arguments[0].error.stack;t=t.split("\n");for(var n=Math.min(3,t.length),o=0;o<n;o++)e+=t[o]}else e=arguments[0].message;__WPO&&__WPO.error&&__WPO.error("swift","SWIFT:"+e)}}window.addEventListener?window.addEventListener("error",e,!1):window.attachEvent&&window.attachEvent("error",e)}()}},function(module,exports){function jsonp(){}var head,script,jsonpUrl="https://log.work.cainiao.com/code_server",callbackName="log"+(1e5*Math.random()).toFixed(0);window[callbackName]=function(data){try{data&&eval(decodeURIComponent(data))}catch(e){}head&&script&&head.removeChild(script)},jsonp()}]);